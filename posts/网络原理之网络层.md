---
title: 网络原理之网络层
description:
aside: false
date: 2022-12-22
tags:
  - 网络原理
---

在计算机网络体系结构中，网络层位于数据链路层之上、传输层之下，位于提供端到端传输层服务的
协议栈底层。网络层是网络核心的最高层，是实现大型网络互连的关键，是网络体系结构中最重要的一层。
本文将介绍网络层的基本功能、典型分组交换网络、网络互连、网络层拥塞控制、Internet 网络层、
路由算法与路由协议等内容。

### 一、网络层服务

**网络层核心任务**：将数据从源主机送达到目的主机

**网络层主要功能**：

**转发**：当输入链路接收到一个分组后，路由器需要决策通过哪条输出链路将分组发送出去，并将分组从输入接口转移到输出接口。
**路由选择**：当分组从源主机流向目的主机时，必须通过某种方式决定分组经过的路由或路径。
**连接建立**：网络层连接是从源主机到目的主机经过的一条路径，这条路径所经过的每个路由器等网络设备都要参与网络层连接的建立。

### 二、数据报网络与虚电路

**数据报网络（无连接服务）**：数据报网络是按照目的主机地址进行路由选择的网络。

特点：

- **无连接**

- 路由选择: **每个分组独立路由**（源主机每发送一个分组，就为该分组加上目的主机地址，然后将该分组推进网络。每个路由器使用分组的目的主机地址转发分组。）

- **按序发送、不一定按序接收**

**虚电路网络（面向连接）**

虚电路是源主机到目的主机的一条路径上建立的一条网络层逻辑连接。在网络层提供面向连接的分组交换服务。双方通信前先虚电路建立连接，通信结束后再拆除连接。

构成：

- 从源主机到目的主机之间的一条路径（一系列的链路和分组交换机）

- 该路径上的每条链路的虚电路标识（VCID）

- 分组交换机的转发表中记录虚电路标识的接续关系

#### 数据报网络与虚电路网络的区别

| 项目     | 数据报网络         | 虚电路网络                     |
| ------ | ------------- | ------------------------- |
| 是否建立连接 | 不建立连接         | 先建立连接                     |
| 地址     | 每个分组包含源和目的端地址 | 每个分组含有一个短的虚电路号            |
| 分组顺序   | 按序发送，不一定按序接收  | 按序发送，按序接收                 |
| 路由选择   | 每个分组独立路由选择    | 建立VC时需要路由选择，之后所有分组都沿此路由转发 |
| 典型网络   | 因特网           | X.25、帧中继、ATM              |

### 三、网络互连和网络互连设备

### 四、拥塞控制

#### ①网络拥塞

用户对网络资源（包括链路带宽、存储空间和处理器处理能力等）的总需求超过了网络固有的容量。

**原因**：

- 缓冲区容量有限
- 传输线路的带宽有限
- 网络结点的处理能力有限
- 网络中某些部分发生了故障

#### ②拥塞控制措施

- 流量感知路由：**权值**根据网络负载**动态**调整，可以将网络流量引导到不同的链路上，均衡网络负载。

- 准入控制

- 流量调节

- 负载脱落

### 五、Internet网络层

#### ①IPv4协议

**数据报格式**

```html

```
